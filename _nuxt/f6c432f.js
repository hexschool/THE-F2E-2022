(window.webpackJsonp=window.webpackJsonp||[]).push([[41,15],{360:function(t,e,r){var content=r(362);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(46).default)("467195b1",content,!0,{sourceMap:!1})},361:function(t,e,r){"use strict";r(360)},362:function(t,e,r){var n=r(45)(!1);n.push([t.i,'.avatar[data-v-1d8020f4]{font-family:"Lato",sans-serif;width:128px;height:128px;display:block;position:relative;transition:border .15s ease-in}.avatar .edit-avatar[data-v-1d8020f4]{background:var(--bs-white);width:40px;height:40px;border-radius:50%;right:0;display:flex;align-items:center;justify-content:center;text-decoration:none;cursor:pointer}.avatar .edit-avatar[data-v-1d8020f4]:hover{background:var(--bs-gray-200)}.avatar img[data-v-1d8020f4]{-o-object-fit:cover;object-fit:cover;border-radius:50%}.list-group-item[data-v-1d8020f4]{background-color:transparent;border:0}.list-group-item.nuxt-link-exact-active[data-v-1d8020f4],.list-group-item[data-v-1d8020f4]:hover{color:var(--bs-dark);background-color:var(--bs-gray-300)}.bg-gray-200[data-v-1d8020f4]{background-color:var(--bs-gray-200)}',""]),t.exports=n},365:function(t,e,r){"use strict";r.r(e);r(23),r(74),r(20);var n=r(10),o=(r(54),r(118),r(72),{name:"Sidebar",props:{info:{default:function(){return{}},type:Object}},data:function(){return{defaultImg:"",imageSrc:"",user:{avatar:"",individual_competition:{name:""}},msg:""}},computed:{defaultImage:function(){var t,e;return"個人組/前端工程師"===(null===(t=this.info.individual_competition)||void 0===t?void 0:t.name)?r(236):"個人組/UI設計師"===(null===(e=this.info.individual_competition)||void 0===e?void 0:e.name)?r(237):r(238)}},watch:{info:{handler:function(){this.user.avatar="",this.user.avatar=this.info.avatar},deep:!0}},methods:{editAvatar:function(){var t=this,e=document.querySelector("input[type=file]").files[0],r=new FileReader;r.onload=function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r){var n,o,l,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=r.target.result.split(",")[1]).length<1048576)){e.next=24;break}return t.$nuxt.$loading.start(),e.prev=3,o=t.$api.request,e.next=7,o.apiPostEditAvatar({avatar:n});case 7:l=e.sent,data=l.data,t.user.avatar=data.avatar_url,t.msg={style:"success",icon:"fa-check-circle",content:"已更新成功！頭貼將於四小時內至一日內更新"},t.$emit("alert",t.msg),setTimeout((function(){window.location.reload()}),2e3),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),t.msg={style:"danger",icon:"fa-exclamation-triangle",content:e.t0.response.data.message||"更新失敗！"},t.$emit("alert",t.msg);case 19:return e.prev=19,t.$nuxt.$loading.finish(),e.finish(19);case 22:e.next=25;break;case 24:alert("圖片大小超過限制，圖片限制為 1 MB。");case 25:case"end":return e.stop()}}),e,null,[[3,15,19,22]])})));return function(t){return e.apply(this,arguments)}}(),r.onerror=function(t){alert(t)},r.readAsDataURL(e)}}}),l=o,c=(r(361),r(29)),component=Object(c.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"col-md-4 mb-5 mb-md-0 text-white"},[e("div",{staticClass:"border py-6 px-6"},[e("div",{staticClass:"avatar mb-2 mx-auto"},[t._m(0),t._v(" "),e("input",{staticStyle:{visibility:"hidden",height:"0px",display:"block"},attrs:{id:"edit-avatar",type:"file",accept:".png,.jpg,.jpeg"},on:{change:t.editAvatar}}),t._v(" "),e("img",{staticClass:"w-100 h-100 d-block",attrs:{src:t.user.avatar||t.defaultImage,alt:"個人頭貼"}})]),t._v(" "),e("div",{staticClass:"text-center"},[e("small",{staticClass:"text-danger"},[t._v("圖片限制檔案大小為 1 MB")]),t._v(" "),e("p",{staticClass:"fw-bold mb-1"},[t._v(t._s(t.info.nickname||"姓名"))]),t._v(" "),e("p",{staticClass:"mb-2"},[t._v(t._s(t.info.email||"信箱"))]),t._v(" "),e("p",{staticClass:"d-inline-block bg-white text-dark py-1 px-3 mb-2"},[t.info.individual_competition?[t._v("\n          "+t._s(t.info.individual_competition.name.replace("/","｜"))+"\n        ")]:t.info.team_competition?[t._v("\n          "+t._s(t.info.team_competition.name.replace("/","｜"))+"\n        ")]:[t._v("組別")]],2),t._v(" "),t.info.medal_name?e("p",[e("img",{staticClass:"pe-1",attrs:{src:t.info.medal_image_url,alt:"徽章"}}),t._v("\n        "+t._s(t.info.medal_name)+"\n      ")]):t._e(),t._v(" "),e("hr")]),t._v(" "),e("div",{staticClass:"list-group mb-5 mt-5 bg-white p-4 rounded-0"},[e("nuxt-link",{staticClass:"list-group-item list-group-item-action p-4",attrs:{to:"/users/prepare"}},[e("i",{staticClass:"fas fa-grin"}),t._v(" 賽前準備")]),t._v(" "),e("nuxt-link",{staticClass:"list-group-item list-group-item-action p-4",attrs:{to:"/users"}},[e("i",{staticClass:"fas fa-edit"}),t._v(" 編輯個人資料")]),t._v(" "),e("nuxt-link",{staticClass:"list-group-item list-group-item-action p-4",attrs:{to:"/users/record"}},[e("i",{staticClass:"fas fa-file-alt"}),t._v(" 投稿紀錄\n      ")])],1),t._v(" "),e("div",{staticClass:"d-grid"},[e("nuxt-link",{staticClass:"btn btn-primary",class:{disabled:!t.info.user_id},attrs:{to:"/users/"+t.info.user_id,target:"_blank"}},[t._v("查看個人公開頁面")])],1)])])}),[function(){var t=this._self._c;return t("label",{staticClass:"edit-avatar position-absolute",attrs:{for:"edit-avatar"}},[t("i",{staticClass:"fas fa-pencil-alt text-dark"})])}],!1,null,"1d8020f4",null);e.default=component.exports},577:function(t,e,r){"use strict";r.r(e);var n=r(10),o=(r(54),r(20),r(365)),l=r(555),c=r(355),d={name:"User",components:{Sidebar:o.default,Edit:l.default,Alert:c.default},middleware:"routerAuth",meta:{requiresAuth:!0,close:!1},data:function(){return{user:{},msg:{}}},mounted:function(){this.getUsersInfo()},methods:{getUsersInfo:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.$api.request,e.next=4,r.apiGetUsersInfo();case 4:n=e.sent,data=n.data,t.user=data.user_info,window.sessionStorage.setItem("HbPeShUserVmYTyPe",t.user.individual_competition.name),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})))()},getSidebarAlertMsg:function(t){this.msg=t}}},v=r(29),component=Object(v.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-white"},[e("div",{staticClass:"container py-5"},[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-lg-8 col-10"},[e("Alert",{attrs:{message:t.msg}})],1)]),t._v(" "),e("div",{staticClass:"row justify-content-center mt-md-7"},[e("Sidebar",{attrs:{info:t.user},on:{edit:t.getUsersInfo,alert:t.getSidebarAlertMsg}}),t._v(" "),e("Edit",{attrs:{info:t.user},on:{edit:t.getUsersInfo}})],1)])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Alert:r(355).default})}}]);