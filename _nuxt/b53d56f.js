(window.webpackJsonp=window.webpackJsonp||[]).push([[21,6],{355:function(t,e,n){"use strict";n.r(e);n(72);var r={name:"Alert",props:{message:{default:function(){return{}},type:Object}},data:function(){return{messages:[]}},watch:{message:function(){this.message.content&&this.addAlert()}},methods:{addAlert:function(){var t=this.message,style=t.style,e=t.icon,content=t.content;this.messages.push({style:style,icon:e,content:content}),this.removeAlert()},removeAlert:function(){var t=this;setTimeout((function(){t.messages.shift()}),6e3)}}},o=n(29),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",t._l(t.messages,(function(n,r){return e("div",{key:r,staticClass:"alert mb-6",class:"alert-".concat(n.style),attrs:{role:"alert"}},[e("p",{staticClass:"mb-0"},[e("i",{staticClass:"pe-1 fas",class:n.icon}),t._v(t._s(n.content))])])})),0)}),[],!1,null,null,null);e.default=component.exports},371:function(t,e,n){t.exports=n.p+"img/button_2.ebd93de.png"},395:function(t,e,n){t.exports=n.p+"img/button_1.c21f54f.png"},444:function(t,e,n){var content=n(487);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(46).default)("28396101",content,!0,{sourceMap:!1})},486:function(t,e,n){"use strict";n(444)},487:function(t,e,n){var r=n(45),o=n(161),c=n(371),l=n(395),d=r(!1),m=o(c),v=o(l);d.push([t.i,".btn-bg{background-image:url("+m+");background-blend-mode:overlay}.btn-bg,.btn-bg-black{background-size:contain;background-position:50%;background-repeat:no-repeat}.btn-bg-black{background-image:url("+v+");background-blend-mode:overlay}",""]),t.exports=d},559:function(t,e,n){"use strict";n.r(e);var r=n(10),o=(n(54),n(91)),c=n(355),l={name:"Login",components:{ValidationObserver:o.a,ValidationProvider:o.b,Alert:c.default},middleware:"routerAuth",meta:{close:!1},data:function(){return{user:{account:"",password:""},msg:{}}},mounted:function(){this.$cookies.get("t_sInR5cCI6IkpXVCJ_token")&&this.$router.push("/users")},methods:{login:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,data,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.$api.request,e.next=4,n.apiPostLogin(t.user);case 4:r=e.sent,data=r.data,o=data.access_token,t.$cookies.set("t_sInR5cCI6IkpXVCJ_token",o,5184e3),t.$router.push("/users"),t.msg={style:"success",icon:"fa-check-circle",content:"登入成功！"},e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),t.msg={style:"danger",icon:"fa-exclamation-triangle",content:e.t0.response.data.message||"登入失敗！"};case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()}}},d=(n(486),n(29)),component=Object(d.a)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-white d-flex align-items-center"},[e("div",{staticClass:"container py-5"},[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-lg-8 col-10"},[e("Alert",{attrs:{message:t.msg}})],1)]),t._v(" "),e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-md-6 d-flex flex-column justify-content-center",staticStyle:{height:"calc(78vh)"}},[e("h1",{staticClass:"fs-2 mb-5"},[t._v("登入")]),t._v(" "),e("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(n){var r=n.invalid;return[e("form",{on:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[e("ValidationProvider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(n){var r=n.errors;return[e("div",{staticClass:"mb-4"},[e("label",{staticClass:"form-label",attrs:{for:"account"}},[t._v("帳號（Email）*")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.account,expression:"user.account"}],staticClass:"form-control rounded-0",class:{"is-invalid":r[0]},attrs:{id:"account",name:"帳號",type:"email",placeholder:"name@example.com"},domProps:{value:t.user.account},on:{input:function(e){e.target.composing||t.$set(t.user,"account",e.target.value)}}}),t._v(" "),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])])]}}],null,!0)}),t._v(" "),e("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(n){var r=n.errors;return[e("div",{staticClass:"mb-4"},[e("label",{staticClass:"form-label",attrs:{for:"password"}},[t._v("密碼 *")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control rounded-0",class:{"is-invalid":r[0]},attrs:{id:"password",name:"密碼",type:"password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),t._v(" "),e("span",{staticClass:"invalid-feedback"},[t._v(t._s(r[0]))])])]}}],null,!0)}),t._v(" "),e("nuxt-link",{staticClass:"link-primary text-decoration-none d-block mb-8",attrs:{to:"/password"}},[t._v("忘記密碼？")]),t._v(" "),e("div",{staticClass:"d-grid gap-2 text-center"},[e("button",{staticClass:"btn text-white fs-4 py-4 btn-bg font-cubic",attrs:{type:"submit",disabled:r}},[t._v("\n                登入\n              ")])])],1)]}}])})],1)])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Alert:n(355).default})}}]);